const translations = {
  GLOBAL: {
    OF: {
      en: "of",
      es: "de",
      ca: "de",
      lt: "iÅ¡",
    },
    FROM: {
      en: "from",
      es: "desde",
      ca: "desde",
      lt: "iÅ¡",
    },
    CANCEL: {
      en: "Cancel",
      es: "Cancelar",
      ca: "CancelÂ·lar",
      lt: "AtÅ¡aukti",
    },
    APPLY: {
      en: "Apply",
      es: "Aplicar",
      ca: "Aplicar",
      lt: "Taikyti",
    },
    LEARNING_LANG: {
      en: "Language to learn",
      es: "Idioma a aprender",
      ca: "Idioma a aprendre",
      lt: "Kalba mokymuisi",
    },
    IN_GAME_TRANSLATIONS: {
      en: "Known language",
      es: "Idioma conocido",
      ca: "Idioma conegut",
      lt: "Vertimo kalba",
    },
    TRANSLATIONS: {
      en: "Translations",
      es: "Traducciones",
      ca: "Traduccions",
      lt: "Vertimai",
    },
  },
  TABS: {
    PLAY: {
      en: "Play",
      es: "Jugar",
      ca: "Jugar",
      lt: "Å½aisti",
    },
    CATALOG: {
      en: "Catalog",
      es: "CatÃ¡logo",
      ca: "CatÃ leg",
      lt: "Katalogas",
    },
    SETTINGS: {
      en: "Settings",
      es: "Ajustes",
      ca: "ConfiguraciÃ³",
      lt: "Nustatymai",
    },
  },
  AUTH: {
    ALL_USERS: {
      en: "Registered users",
      es: "Usuarios registrados",
      ca: "Usuaris registrats",
      lt: "Registruoti vartotojai",
    },
    NAME: {
      en: "Name",
      es: "Nombre",
      ca: "Nom",
      lt: "Vardas",
    },
    SIGNUP: {
      TITLE: {
        en: "Create account",
        es: "Crear cuenta",
        ca: "Crear compte",
        lt: "Sukurti paskyrÄ…",
      },
      ABOVE_SIGNIN_LINK_TEXT: {
        en: "Already have an account?",
        es: "Â¿Ya tienes una cuenta?",
        ca: "Ja tens una compte?",
        lt: "Jau turite paskyrÄ…?",
      },
      SIGNIN_LINK: {
        en: "Sign in",
        es: "Entra en tu cuenta",
        ca: "Entra al teu compte",
        lt: "Ä®kelti savo paskyrÄ…",
      },
      CONTINUE: {
        en: "Sign up",
        es: "Registrarse",
        ca: "Registrar-se",
        lt: "Registruotis",
      },
      ALERT_DATA_STORED: {
        en: "Data stored. Ready to play",
        es: "Datos guardados. Listo para jugar",
        ca: "Dades desats. Preparat per jugar",
        lt: "Duomenys saugomi. Gerai Å¾aisti",
      },
      ALERT_NAME_TAKEN: {
        en: "Name already taken. Please choose another name.",
        es: "Nombre ya usado. Por favor, elige otro nombre.",
        ca: "Nom ja utilitzat. Si us plau, trieu un altre nom.",
        lt: "Vardas jau naudojama. PraÅ¡ome pasirinkti kitÄ… vardÄ….",
      },
      ALERT_LANGUAGE_CLASH: {
        en: "Learning language and language for translations cannot be the same.",
        es: "El idioma a aprender y el idioma para las traducciones no pueden ser el mismo.",
        ca: "El idioma a aprendre i l'idioma per a les traduccions no poden ser el mateix.",
        lt: "Mokymosi kalba ir kalba, kuriai atliksite vertimus, negali bÅ«ti vienodi.",
      },
    },
    SIGNIN: {
      TITLE: {
        en: "Sign in now",
        es: "Entra en tu cuenta",
        ca: "Entra al teu compte",
        lt: "Ä®kelti savo paskyrÄ…",
      },
      ABOVE_SIGNUP_LINK_TEXT: {
        en: "Don't you have an account yet?",
        es: "Â¿AÃºn no tienes una cuenta?",
        ca: "Encara no tens una compte?",
        lt: "Neturite vis dar paskyros?",
      },
      SIGNUP_LINK: {
        en: "Sign up",
        es: "Registrarse",
        ca: "Registrar-se",
        lt: "Registruotis",
      },
      CONTINUE: {
        en: "Sign in",
        es: "Entrar",
        ca: "Entrar",
        lt: "Ä®kelti",
      },
      ALERT_DATA_RESTORED: {
        en: "Data restored. Ready to play",
        es: "Datos restaurados. Listo para jugar",
        ca: "Dades restaurades. Preparat per jugar",
        lt: "Duomenys atkurti. Gerai Å¾aisti",
      },
    },
  },
  LIBRARY: {
    RESUME: {
      en: "Continue",
      es: "Continuar",
      ca: "Continuar",
      lt: "TÄ™sti",
    },
    ALERT_ADD_STORY: {
      en: "Adding stories not implemented yet ðŸ˜ž",
      es: "De momento no se pueden aÃ±adir mÃ¡s historias ðŸ˜ž",
      ca: "De moment no es poden afegir mÃ©s histÃ²ries ðŸ˜ž",
      lt: "Kol kas negalima pridÄ—ti daugiau istorijÅ³ ðŸ˜ž",
    },
    ALERT_REMOVED_STORY: {
      en: "Story removed successfully!",
      es: "Â¡Historia eliminada con Ã©xito!",
      ca: "HistÃ²ria eliminada amb Ã¨xit!",
      lt: "Istorija paÅ¡alinta sÄ—kmingai!",
    },
  },
  SETTINGS: {
    SENTENCES_PER_ROUND: {
      en: "Sentences per round",
      es: "Frases por ronda",
      ca: "Frases per ronda",
      lt: "Å½odÅ¾iai per rÅ«Å¡Ä¯",
    },
    HISTORY_LENGTH: {
      en: "Rounds in memory",
      es: "Rondas en memoria",
      ca: "Rondes en memÃ²ria",
      lt: "RÅ«Å¡iÅ³ skaiÄius",
    },
    READING_MODE: {
      en: "Reading mode",
      es: "Modo lectura",
      ca: "Mode lectura",
      lt: "Skaitymo reÅ¾imas",
    },
    APP_LANGUAGE: {
      en: "App language",
      es: "Idioma de la app",
      ca: "Idioma de l'app",
      lt: "App kalba",
    },
    RESTORE_DATA: {
      en: "Restore data",
      es: "Restaurar datos",
      ca: "Restaurar dades",
      lt: "Atkurti duomenis",
    },
    SAVE_DATA: {
      en: "Save data",
      es: "Guardar datos",
      ca: "Guardar dades",
      lt: "IÅ¡saugoti duomenis",
    },
    ALERT_RESTORED_DATA_FOR: {
      en: "Restored data for ",
      es: "Datos restaurados para ",
      ca: "Dades restaurades per a ",
      lt: "Atkurti duomenys uÅ¾ ",
    },
    ALERT_ERROR_RESTORING: {
      en: "Error restoring data",
      es: "Error al restaurar datos",
      ca: "Error al restaurar dades",
      lt: "Klaida atkurti duomenis",
    },
    ALERT_ERROR_DELETING: {
      en: "Cannot delete current user's data",
      es: "No se pueden borrar los datos del usuario actual",
      ca: "No es poden esborrar les dades de l'usuari actual",
      lt: "Negalima iÅ¡trinti dabartinio vartotojo duomenÅ³",
    },
    ALERT_DELETED_DATA_FOR: {
      en: "Deleted data for ",
      es: "Datos eliminados para ",
      ca: "Dades eliminades per a ",
      lt: "IÅ¡trinti duomenys uÅ¾ ",
    },
    ALERT_SETTINGS_SAVED_FOR: {
      en: "Settings saved for player `",
      es: "Ajustes guardados para el jugador `",
      ca: "ConfiguraciÃ³ guardada per al jugador `",
      lt: "Nustatymai saugomi uÅ¾ Å¾aidÄ—jÄ… `",
    },
  },
  FILTER: {
    TITLE: {
      en: "Filter stories",
      es: "Filtrar historias",
      ca: "Filtrar histÃ²ries",
      lt: "Filtruoti istorijas",
    },
    NUM_STORIES: {
      en: "Number of stories",
      es: "NÃºmero de historias",
      ca: "Nombre d'histÃ²ries",
      lt: "SkaiÄius istorijÅ³",
    },
    ALERT_DATA_FILTERED: {
      en: "Data filtered",
      es: "Datos filtrados",
      ca: "Dades filtrades",
      lt: "Duomenys filtravimas",
    },
  },
  EDIT: {
    TITLE: {
      en: "Edit story",
      es: "Editar historia",
      ca: "Editar histÃ²ria",
      lt: "Redaguoti istorijÄ…",
    },
    TITLE_INPUT: {
      en: "Title",
      es: "TÃ­tulo",
      ca: "TÃ­tol",
      lt: "Pavadinimas",
    },
    LANGUAGES_AND_TRANSLATIONS: {
      en: "Languages and translations",
      es: "Idiomas y traducciones",
      ca: "Idiomes i traduccions",
      lt: "Kalbos ir vertimai",
    },
    SENTENCES_DONE: {
      en: "Sentences done",
      es: "Frases completadas",
      ca: "Frases completades",
      lt: "IÅ¡samiai",
    },
    ALERT_STORY_UPDATED: {
      en: "Story updated",
      es: "Historia actualizada",
      ca: "HistÃ²ria actualitzada",
      lt: "Istorija atnaujinta",
    },
    ALERT_INVALID_STORY: {
      en: "Invalid story",
      es: "Historia invÃ¡lida",
      ca: "HistÃ²ria invÃ lida",
      lt: "Neteisinga istorija",
    },
    ALERT_FIX_ERRORS: {
      en: "Please fix the errors above.",
      es: "Por favor, corrige los errores.",
      ca: "Si us plau, corregiu els errors.",
      lt: "PraÅ¡au iÅ¡taisyti klaidÅ³ virÅ¡uje.",
    },
  },
};

/*
Create one file for each language, with the 
translations above
*/
// Helper function to recursively extract translations for a specific language
const fs = require("fs");
const path = require("path");

// Helper function to recursively discover languages in the translation object
// TODO: if this would make it very slow, we could just check the first item
function discoverLanguages(obj, languages = new Set()) {
  Object.values(obj).forEach((value) => {
    if (typeof value === "object" && !Array.isArray(value)) {
      if (
        Object.keys(value).some(
          (key) => typeof value[key] === "string"
        )
      ) {
        // If the object contains translations (language keys), add them to the set
        Object.keys(value).forEach((lang) => languages.add(lang));
      } else {
        // If it's a nested object, recurse further
        discoverLanguages(value, languages);
      }
    }
  });
  return [...languages];
}

// Helper function to recursively extract and preserve the structure for a specific language
function extractTranslationsForLanguage(obj, lang) {
  const result = {};

  Object.keys(obj).forEach((key) => {
    const value = obj[key];

    if (typeof value === "object" && !value[lang]) {
      // If it's an object but doesn't contain a translation for the current language, recurse
      result[key] = extractTranslationsForLanguage(value, lang);
    } else if (value[lang]) {
      // If it has a translation for the language, add it to the result
      result[key] = value[lang];
    }
  });

  return result;
}

// Automatically discover languages from the translations object
const languages = discoverLanguages(translations);

// Languages we want to generate files for

languages.forEach((lang) => {
  // Wrap the translations in a "translation" key
  const langTranslations = {
    translation: extractTranslationsForLanguage(translations, lang),
  };

  // Write the JSON file for each language
  fs.writeFileSync(
    path.join(__dirname, "generated", `${lang}.json`),
    JSON.stringify(langTranslations, null, 2)
  );
  console.log(`Generated ${lang}.json`);
});
